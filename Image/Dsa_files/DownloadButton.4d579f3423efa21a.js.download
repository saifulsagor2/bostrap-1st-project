"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[64743,99499],{50763:(e,t,a)=>{a.r(t),a.d(t,{DownloadButton:()=>u,useStyles:()=>c});var r=a(406029),n=a(513372),s=a(727326),i=a(532850),o=a(808059),l=a(377981),d=a(455729);let c=(0,a(807703).n9)()(e=>{let{tokens:{spacing:t}}=e;return{downloadButtonCTA:{marginTop:t.m,marginLeft:t.m,marginRight:t.m}}}),u=e=>{let{clickAnalyticsLabelsForProduct:t,defaultClickAnalyticsLabel:a=s.lnH,enhancedStateId:u,label:m,productNameStateId:h,setStateOnClick:p}=e,{classes:g}=c(),w=(0,l.h)(),{setStates:f}=(0,o.h6)(),v=(0,o.Cw)(h),b=(0,o.Cw)(u)?i.Pp:i.sU;return(0,d.useEffect)(()=>{w({actionName:"convert - LO image conversion panel download button is viewed"})},[]),(0,r.jsx)(n.$n,{"aria-label":m,variant:"contained",color:"secondary",onClick:()=>{f(p),w({actionName:"convert - LO image conversion panel download button clicked",customAttributes:{selectedPlan:v,selectedLicense:b}})},className:g.downloadButtonCTA,labelTrack:t?.[v]||a,children:m})}},52492:(e,t,a)=>{a.r(t),a.d(t,{Download:()=>s});var r=a(406029);let n=(0,a(13068).A)((0,r.jsx)("path",{d:"M24.933 15.733l-1.867-1.867-5.733 5.733V3.332h-2.667v16.267l-5.733-5.733-1.867 1.867 8.933 8.933 8.933-8.933zm-22.266 11.6V30h26.667v-2.667H2.667z"}),"Download.svg"),s=e=>(0,r.jsx)(n,{viewBox:"0 0 32 32",...e})},82078:(e,t,a)=>{a.d(t,{$:()=>m});var r=a(727326),n=a(629749),s=a(581298),i=a(573923),o=a(559044),l=a(498848),d=a(377981),c=a(586694),u=a(455729);let m=()=>{let{analytics:e}=(0,c.pn)(),{locale:t}=(0,s.Y)(),{emitEditProductAnalyticsEvent:a}=(0,n.v)(),{getSearchContext:m}=(0,l.J)(),h=(0,d.h)();return(0,u.useCallback)(n=>{let{assets:s=[],audioContext:l,eventLabel:d,licenseId:c,isRedownload:u,isQuickDownload:p,isPaid:g,isComp:w,pageSection:f,listId:v}=n,b=s[0]??{},y=d||w&&r.z3l||void 0,_=(0,o.yg)(b)||(0,o.f0)(b);e.productDownloaded({products:s.map(e=>(0,i.Un)({asset:e,shouldGetSearchContextFromAsset:!0,licenseId:c,pageSection:f})),download_context:(0,i.qn)({asset:b,isComp:w,isPaid:g,isQuickDownload:p,isRedownload:u,language:t}),eventLabel:y,list_id:v??"",search_context:m(b),...l&&{audio_context:{...l}}}),a("license"),h({actionName:`Successful ${u?"redownload":"download"}`,customAttributes:{assetType:_}})},[e,t,m,a,h])}},116659:(e,t,a)=>{a.d(t,{A:()=>s,W:()=>n});var r=a(813631);let n=e=>!!(e&&e.isUpload),s=e=>!!(e&&e.type===r._g)},116835:(e,t,a)=>{a.d(t,{Rj:()=>b,og:()=>S});var r=a(487519),n=a(392684),s=a(532598),i=a(338436),o=a(813631),l=a(669670),d=a(345307),c=a(485650),u=a(722442),m=a(559044),h=a(402463),p=a(531950),g=a(884378),w=a(293115),f=a(531648);let v=e=>{let{asset:t}=e,{angle:a,selectedFormatType:r,selectedShadowsOption:o}=t;return{angle:a||t?.metadata?.cart?.angle||n.R,content_size:i.kP,...r===s.OA&&{include_shadows:"on"===o}}},b=e=>{let{asset:t}=e;return t?.metadata?.cart?.sizes||t.sizes},y=async e=>{let{asset:t}=e;if(t?.metadata?.cart&&!t.metadata.cart.sizes){let e=(0,m.Kx)(t),a={id:t.id};return e&&(a.channel=l.H6,a.content_provider=d.Au),(await p.Bn.get((0,r.yb)({queryParams:a}).formattedUrl).then(e=>{let{data:t}=e;return(0,g.A)(t)})).sizes}return b({asset:t})},_=e=>{let{asset:t,is3dObject:a,isRexEditorial:r,selectedAssetSize:n}=e;return t.licenseAsJpeg||t.metadata?.cart?.licenseAsJpeg?"jpeg":a&&t.selectedFormatType?"3dByFormat":a&&t.metadata?.cart?.size?"3dBySize":h.N[n]?"comped":r?"rexEditorial":"default"},A=e=>{let{asset:t,licenseStrategy:a,selectedAssetSize:r,sizesToUseArray:n}=e,o=(()=>{switch(a){case"jpeg":return n.find(e=>{let{format:t}=e;return t===s.kr});case"3dByFormat":return n.find(e=>{let{format:a}=e;return a===t.selectedFormatType});case"3dBySize":return;case"comped":return(0,u.z6)({sizes:n,compSizeImage:r});default:return(0,u.hp)(n)}})(),l=o?.format||t.metadata?.cart?.format;switch(a){case"rexEditorial":return{size:i.mx,format:l};case"3dByFormat":{let[e]=o.name.split("_");return{size:e,format:l}}case"3dBySize":return{size:t?.metadata?.cart?.size,format:l};default:return{size:h.PS[(0,w.C)(o.name)].downloadName,format:l}}},I=e=>{let{selectedAssetSize:t,asset:a}=e,r=b({asset:a}),n=(0,m.$9)(a),s=(0,m.R1)(a),o=s?v({asset:a,selectedAssetSize:t,sizesToUse:r}):{};if(!r&&a?.metadata?.cart?.size&&a?.metadata?.cart?.format)return{content_size:n?i.mx:a.metadata.cart.size,content_format:a.metadata.cart.format,...o};let l=Object.values(r),d=_({asset:a,is3dObject:s,isRexEditorial:n,selectedAssetSize:t}),{size:c,format:u}=A({asset:a,licenseStrategy:d,selectedAssetSize:t,sizesToUseArray:l});return{content_size:c,content_format:u,...o}},x=e=>{let{map:t,licenseName:a}=e,r=t[a];return r===i.Fo?i.TR:r},k=e=>{let{asset:t,licenseName:a,isVideoComp:r,selectedAssetSize:n,sizes:s}=e,i=(0,m.$9)(t),o=(0,m.y8)(t),l=(0,m.s$)({sizes:Object.values(s)});return!r&&l?x({map:h._u,licenseName:a}):r||a===c.eNn||i||o?!n||i||o?(0,u.fk)({sizes:s}):h.w4[n]:x({map:h.w4,licenseName:a})},R=async e=>{let{asset:t,licenseName:a,isVideoComp:r,selectedAssetSize:n}=e,s=await y({asset:t}),o=k({asset:t,licenseName:a,isVideoComp:r,selectedAssetSize:n,sizes:s}),l=(0,m.$9)(t),d=Object.values(s).find(e=>{let{resolution:t}=e;return h.KH[t?.toLowerCase()]===o});return{content_size:l?i.mx:o,content_format:d?.format}},C=e=>{let t,{format:a,selectedAssetSize:r}=e;switch(r){case"stereo":t=i.GD;break;case"5.1":t=i.eC;break;default:t=i.LM}return{content_size:t,content_format:a===s.nz?s.nz:s.D1}},E=async e=>{let{asset:t,licenseName:a,isVideoComp:r,selectedAssetSize:n,format:s}=e,l=(0,f.ZC)({asset:t});switch((0,m.Kx)(t)&&(l=o.SL),l){case o.G_:case o.SL:return await R({asset:t,licenseName:a,isVideoComp:r,selectedAssetSize:n});case o.FY:return{content_size:i.Rf,content_format:o.FY};case o.M9:return C({selectedAssetSize:n,format:s});default:return I({selectedAssetSize:n,asset:t})}},S=async e=>{let{licenseName:t,selectedAssetSize:a,asset:r,isVideoComp:n,format:s}=e,i=(0,f.ZC)({asset:r}),o=r.id.toString();return{content_id:o,content_type:(0,f.Uw)({assetType:i,assetId:o}),...await E({asset:r,licenseName:t,isVideoComp:n,selectedAssetSize:a,format:s})}}},157535:(e,t,a)=>{a.d(t,{j:()=>i});var r=a(461266),n=a(455729);let s={applyCanvasViewed:r.lQ,applyToolAnalytics:r.lQ,emitEditProductAnalyticsEvent:r.p5,setAnalyticsStatePartial:r.lQ},i=(0,n.createContext)(s)},181758:(e,t,a)=>{a.d(t,{x:()=>o});var r=a(406029),n=a(337304),s=a(291186),i=a(461266);let o=e=>{let{asset:t,assetRegisteredCallback:a=i.lQ,registrationNotAllowedCallback:o,component:l=n.t,componentProps:d,onRegistration:c=i.lQ,children:u,isDisabled:m=!1,isLoading:h=!1}=e,{assetRegistrationHandler:p,isLoading:g}=(0,s.T)({generatedAsset:t,registrationCallback:a,registrationNotAllowedCallback:o}),w=g||h,f=async()=>{c(),await p()};return(0,r.jsx)(l,{onClick:f,disabled:w||m,isLoading:w,...d,children:u})}},193114:(e,t,a)=>{a.d(t,{i:()=>s});var r=a(559044),n=a(184905);let s=e=>{let{asset:t}=e,a=(0,n.H)();return(0,r.sY)(t??{})&&a}},213304:(e,t,a)=>{a.d(t,{G:()=>n});var r=a(455729);let n=e=>{let t=(0,r.useRef)(!1);return!t.current&&e&&(t.current=!0),t.current}},235757:(e,t,a)=>{a.d(t,{Bl:()=>b,Dq:()=>p,Ez:()=>g,FC:()=>y,G4:()=>h,GT:()=>v,Mo:()=>f,UM:()=>m,Zq:()=>u,aA:()=>A,e4:()=>R,iT:()=>I,lQ:()=>k,n4:()=>w,wQ:()=>x});var r=a(122980),n=a(49876);let{IMAGE:s,VIDEO:i,AUDIO:o,ELEMENT:l,SFX:d}=n.jZ,{DESIGN:c}=n.MP,u=e=>e.type===s&&!e.isWithdrawn&&!e.isRexEditorial,m=e=>e.type===s&&!e.isWithdrawn&&!!e.isRexEditorial,h=e=>e.type===o&&!e.isWithdrawn&&!e.isRexEditorial,p=e=>e.type===i&&!e.isWithdrawn&&!e.isRexEditorial,g=e=>e.type===i&&!e.isWithdrawn&&!!e.isRexEditorial,w=e=>e.type===l&&!e.isWithdrawn,f=e=>e.type!==c&&!!e.isWithdrawn,v=e=>e.type===c,b=e=>e.type===d,y=e=>!e.isWithdrawn&&!!e.isRexEditorial,_=e=>v(e)||h(e)||b(e)||w(e)||e.isUpload||!1,A=(e,t,a)=>{let{t:r}=e;return(_(t)?t?.title:a)||r("common:adjectives_untitled")},I=e=>!!e.holding?.lastLicensedAt||e.holding?.assetStatus.includes(r.fs)||e.holding?.assetStatus.includes(r.s9),x=e=>e.holding?.assetStatus!==void 0&&e.holding?.assetStatus?.includes(r.RK),k=e=>{let t={assetType:e.mediaItem.type,aspect:e.mediaItem.aspect??1,url:e.mediaItem.src||e.mediaItem.thumbnailUrl||""};return p(e.mediaItem)||g(e.mediaItem)?t.url=e.mediaItem.src:v(e.mediaItem)?t.url=e.mediaItem.thumbnailUrl||"":(u(e.mediaItem)||m(e.mediaItem))&&(t.url=e.mediaItem.src,t.aspect=e.mediaItem.aspect),t},R=e=>p(e)||g(e)?e.previewImageUrl:v(e)?e.thumbnailUrl:u(e)||m(e)?e.src:h(e)||b(e)?e.waveformPng:null},263607:(e,t,a)=>{a.d(t,{A:()=>r});let r=(0,a(455729).createContext)({})},291186:(e,t,a)=>{a.d(t,{T:()=>k});var r=a(926114),n=a(487519),s=a(648973),i=a(813631),o=a(563609),l=a(515729),d=a(120638),c=a(320437),u=a(30721),m=a(531950),h=a(884378),p=a(116659),g=a(461266),w=a(981278),f=a(568880),v=a(455729);let b=JSON.parse('{"id":"ff0f1012e7b153d68ad774c80d8f2e7a248a0477296111cff33f280372c4c832","type":"mutation","name":"registerImage","source":"mutation registerImage($assetId:ID!){registerImage(assetId:$assetId){data{image{classicId __typename}__typename}problems{message __typename}__typename}}"}');var y=a(946131),_=a(901606);let A=()=>{let e=(0,y.$)("/"),[t,a]=(0,v.useState)(!1);return{isLoading:t,registerAsset:(0,v.useCallback)(async t=>{let{id:r}=t;a(!0);try{let t=e=>{throw e},a=e=>e.registerImage;return await e(b.source,{assetId:r}).then(e=>(0,_.F)({response:e,onError:t,onSuccess:a}))}finally{a(!1)}},[e])}},I=e=>"AssetRegistrationDisallowedProblem"===e.__typename,x=e=>e.problems&&e.problems.find(e=>I(e)),k=e=>{let{generatedAsset:t,registrationCallback:a=g.lQ,registrationNotAllowedCallback:b}=e,{isLoading:y,registerAsset:_}=A(),I=(0,w.useRouter)(),k=(0,u.i9)(),R=(0,d.KZ)({landing_page:I.asPath}),{enqueueSnackbar:C}=(0,l.d)(),E=(0,c.v)(),{t:S}=(0,f.Bd)(r.Fjj);return{assetRegistrationHandler:(0,v.useCallback)(async()=>{if(!k)return void I.push(R);if(y)return;if(!(0,p.A)(t))return void a?.(t);let e=e=>{C({alertSeverity:s.ff,error:e,jiraReference:"AIGEN-197",message:S("notifications:label_generic_failure"),reason:"asset registration"}),E({error:e,msg:o.a_,customAttributes:{generatedAssetId:t.id}})};try{let r=await _(t),s=x(r);if(s){let{sourceAsset:t}=s;if(b&&t){if("CreativeImage"===t.__typename){let e=await m.Bn.get((0,n.LB)({id:t.classicId,assetType:i.W1,queryParams:void 0}).formattedUrl).then(e=>(0,h.A)(e.data));b(e)}else"UserImage"===t.__typename?b(t):e(Error("Blocking asset not handled"));return}e(Error("Asset registration not allowed but fallback not provided"));return}let o=r?.data?.image.classicId,l=await m.Bn.get((0,n.LB)({id:o,assetType:i.W1,queryParams:void 0}).formattedUrl).then(e=>(0,h.A)(e.data));a(l)}catch(t){if(t===o.OQ.UNAUTHORIZED)return void I.push(R);e(t)}},[k,y,t,I,R,a,_,b,C,S,E]),isLoading:y}}},298714:(e,t,a)=>{a.d(t,{l:()=>n});var r=a(571024);let n=a.n(r)()(()=>a.e(66266).then(a.bind(a,796283)).then(e=>({default:e.TosModal})),{loadableGenerated:{webpack:()=>[796283]},ssr:!1})},307859:(e,t,a)=>{a.d(t,{H:()=>l});var r=a(406029),n=a(513372),s=a(97959),i=a(52492);let o=(0,a(807703).n9)()(e=>{let{breakpoints:t,tokens:{spacing:a,color:r},palette:{secondary:n}}=e;return{root:{padding:`${a.s} ${a.base}`,[t.up("lg")]:{padding:`${a.s} ${a.xl}`},whiteSpace:"nowrap"},redBackgroundIcon:{padding:a.s,marginLeft:a.xxs,color:r.white,backgroundColor:n.main,"&:hover":{backgroundColor:n.dark}}}}),l=e=>{let{clickAnalyticsLabel:t="",color:a="secondary",isOverlay:l=!1,label:d,onClick:c,shouldUseIcon:u=!1,showGlobalProgressBar:m=!0,variant:h="contained"}=e,{classes:p}=o();return u?(0,r.jsx)(s.K,{className:l?p.redBackgroundIcon:p.root,onClick:c,"aria-label":d,clickTrack:t,size:"large",showGlobalProgressBar:m,children:(0,r.jsx)(i.Download,{})}):(0,r.jsx)(n.$n,{className:p.root,color:a,variant:h,fullWidth:!0,onClick:c,clickTrack:t,"aria-label":d,showGlobalProgressBar:m,"data-automation":"AssetDownloadCta_DownloadButton",children:d})}},337304:(e,t,a)=>{a.d(t,{t:()=>v});var r=a(406029),n=a(464839),s=a(215075),i=a(907422),o=a(687534),l=a(838840),d=a(513372),c=a(97959),u=a(921888),m=a(81307);let h=(0,a(807703).n9)()((e,t,a)=>{let{breakpoints:r,palette:n,spacing:s,tokens:{font:i,border:o}}=e,{withDefaultColorScheme:l}=t;return{icon:{fontSize:i.size.icon},iconButtonWithLabel:{display:"flex",alignItems:"center",gap:s(3),maxWidth:"90%",[`.${a.buttonSquared}:hover + .${a.iconButtonLabel}`]:{fontWeight:i.weight.bold,color:n.text.primary}},buttonSquared:{marginLeft:0,borderRadius:o.radius.l,...!l&&{border:`1px solid ${n.border1Color}`,backgroundColor:n.action.disabledBackground,":hover":{borderColor:"transparent",backgroundColor:n.info.inverted,color:n.getContrastText(n.info.inverted)}}},editActionButton:{width:"auto",padding:s(3),minWidth:0,[r.up("md")]:{padding:s(4)}},iconButtonLabel:{fontSize:i.size.xs,color:n.text.secondary,lineHeight:i.lineHeight.m,flex:"auto"}}}),p=e=>{let{isLoading:t=!1}=e;return(0,r.jsx)(r.Fragment,{children:t&&(0,r.jsx)(n.A,{"data-automation":"EditActionIcon_Loading",color:"inherit",size:24,sx:{position:"absolute"}})})},g=e=>{let{Icon:t,isIconButton:a,classProps:n,isLoading:i,children:o}=e;return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{isLoading:i}),(a&&t?(0,r.jsx)(t,{className:n?.icon}):o)||(0,r.jsx)(s.A,{"data-automation":"EditActionButton_Skeleton",variant:"text",width:"70px"})]})},w=e=>{let{label:t,title:a,Component:n,tooltipPlacement:s="top",classProps:i,...o}=e;return(0,r.jsx)(l.D,{placement:s,role:"tooltip",title:a||t,tooltipClassName:i?.tooltip,children:(0,r.jsx)("span",{children:(0,r.jsx)(n,{...o})})})},f=e=>{let{label:t,title:a,classProps:n,isIconButton:s,Icon:l,squareButton:u,withTooltip:m,withLabel:h,withInlineLabel:p,tooltipPlacement:g,...f}=e,v=s?c.K:d.$n,b={label:t,title:a,Component:v,classProps:n,tooltipPlacement:g,...f};return u?(0,r.jsxs)(i.A,{className:n?.iconContainer,children:[m?(0,r.jsx)(w,{...b}):p?(0,r.jsxs)(c.K,{...f,children:[l&&(0,r.jsx)(l,{}),(0,r.jsx)(o.A,{variant:"caption",className:n?.label,children:t})]}):(0,r.jsx)(c.K,{...f}),h&&(0,r.jsx)(o.A,{variant:"caption",className:n?.label,children:t})]}):m?(0,r.jsx)(w,{...b}):(0,r.jsx)(v,{...f})},v=e=>{let{onClick:t,classProps:a,Icon:n,label:s,children:i,isLoading:o=!1,withLabel:l=!1,withInlineLabel:d=!1,withTooltip:c=!1,isIconButton:p=!1,squareButton:w=!1,withDefaultColorScheme:v=!1,variant:b,...y}=e,{cx:_,classes:A}=h({withDefaultColorScheme:v}),{classes:I}=(0,m.eu)(),{classes:x}=(0,u.V)(),k=(p||w)&&!!n,R={squareButton:w,isIconButton:k,classProps:{...a,iconContainer:_(A.iconButtonWithLabel,a?.iconContainer),label:_(A.iconButtonLabel,a?.label),icon:_(A.icon,a?.icon)}},C={onClick:t,variant:b,className:_({[I.buttonFilter]:!k&&!v,[A.editActionButton]:!k,[x.darkBackgroundIcon]:k&&!v,[A.buttonSquared]:w},a?.button),...k?{size:"small","aria-label":s,"data-automation":`EditActionIcon${w?"Squared":""}Button${c?"WithTooltip":""}`}:{startIcon:n&&(0,r.jsx)(n,{className:_(A.icon,a?.icon)}),variant:b??"contained",color:"primary","data-automation":`EditActionButton${c?"WithTooltip":""}`},label:s,Icon:n,withLabel:l,withInlineLabel:d,withTooltip:c,...R,...y};return(0,r.jsx)(f,{...C,children:(0,r.jsx)(g,{Icon:n,isLoading:o,...R,children:i})})}},476539:(e,t,a)=>{a.d(t,{z:()=>l});var r=a(639424),n=a(339264),s=a(119349),i=a(455729),o=a(120638);let l=e=>{let{asset:t,query:a={},shouldSetLocalStorage:l=!1}=e,d=(0,o.pb)(a);return(0,i.useCallback)(()=>{n.B&&(l&&(0,r.lL)(t),window.NREUM?.addPageAction?.("UP3-1623 assign useSignUpPageRedirect signUpPath to href",{...window.location||{},shouldSetLocalStorage:l,signUpPath:d}),(0,s.L3)(d,"signUpPageRedirect"))},[d,t,l])}},497604:(e,t,a)=>{a.d(t,{e:()=>c,s:()=>d});var r=a(392684),n=a(532598),s=a(813631),i=a(531648),o=a(722442),l=a(559044);let d=e=>{let{asset:t}=e;switch((0,l.f0)(t)){case s.G_:return(0,o.ch)(Object.values(t.sizes));case s.W1:default:return(0,o.hp)(t?.sizes&&Object.values(t.sizes))}},c=e=>{let t,a,{asset:d,selectedAssetSize:c,selectedShadowsOption:u,isTitleNeeded:m=!1}=e,h=(0,i.ZC)({asset:d}),p=(0,l.R1)(d);(0,l.Kx)(d)&&(h=s.SL);let g=d.id.toString(),w=(0,i.Uw)({assetType:h,assetId:g});switch(h){case s.G_:case s.SL:t=c||(0,o.zS)({sizes:d.sizes})?.[0],a=t?.resolution;break;case s.FY:case s.M9:case s.on:t=c,a=t?.resolution;break;case s.vo:case s.kc:default:t=c||(0,o.hp)(d.sizes),[a]=t.name.split("_")}return{content_id:g,content_type:w,content_size:a,content_format:t?.format,...m?{content_title:d?.title}:{},...p?{...c.format===n.OA&&{include_shadows:"on"===u},angle:d?.angle||r.R}:{}}}},530376:(e,t,a)=>{a.d(t,{I2:()=>u,YW:()=>l,rc:()=>d});var r=a(377981),n=a(345622),s=a(119349),i=a(981278),o=a(455729),l=function(e){return e.HOMEPAGE="GHP",e.RESULTS="GRP",e.CHATBOT="CHATBOT",e}({}),d=function(e){return e.PAGE="page loaded",e.GENERATE="generate text_to_image",e.MAGIC_BRUSH="generate inpainted image",e.SMART_EDIT="generate inpainted image from prompt",e.VARIATION="generate variation",e.ZOOM_OUT="generate zoom_out",e.VIDEO="generate video",e.DOWNLOAD="download",e.COMP="comp",e.ADD_TO_CART="add_to_cart",e.LICENSED="licensed",e.REDOWNLOAD="redownloaded",e.NEW_MESSAGE="chat message sent",e}({});let c={[(0,n.ll)()[0]]:"GHP",[n.ns]:"GRP",[n.AR]:"CHATBOT"},u=()=>{let{pathname:e}=(0,i.useRouter)(),t=(0,r.h)();return(0,o.useCallback)(a=>{let{action:r,page:n,customAttributes:i,asset:o,generationType:l}=a,d=(n??c[(0,s.YT)(e)])||"";t({actionName:`Generate - ${d} - ${r}`,customAttributes:{...i,...o&&{assetId:o.id},...l&&{generationType:l}}})},[t,e])}},531648:(e,t,a)=>{a.d(t,{Ic:()=>c,Qk:()=>l,Uw:()=>i,ZC:()=>o,xB:()=>d});var r=a(813631),n=a(485650),s=a(559044);let i=e=>{let{assetId:t,assetType:a}=e;if((0,s.$9)({id:t}))return r.uH;switch(a){case r.W1:case r.no:case r.kc:case r.m$:return r.vo;case r.BI:return r.G_;case r.on:case r.pS:return r.FY;case r.M9:return r.M9;default:return a}},o=e=>{let{asset:t}=e;if(t?.image?.isVector)return r.kc;if((0,s.$9)(t))return r.uH;let a=t.imageType||t.itemType||t.type;switch(a){case r.KB:case r.$E:case r.no:return r.W1;case r.BI:return r.G_;case r.pS:return r.FY;case r.M9:return r.M9;default:return a}},l=e=>{let{asset:t}=e;if((0,s.O6)(t))return r.uH;if((0,s.Kx)(t))return r.rr;let a=t.imageType||t.itemType||t.type;switch(a){case r.kc:case r.vo:case r.KB:case r.$E:case r.no:return r.W1;case r.BI:return r.G_;case r.pS:return r.FY;case r.M9:return r.M9;default:return a}},d=e=>{let{asset:t}=e;if((0,s.O6)(t))return r.oh;if((0,s.Kx)(t))return r.SL;let a=t.imageType||t.itemType||t.type;switch(a){case r.kc:case r.vo:case r.KB:case r.$E:case r.no:return r.W1;case r.BI:return r.G_;case r.pS:case r.on:return r.FY;case r.M9:return r.M9;default:return a}},c=e=>{let t=d({asset:e.mediaItem});return e.licenseName===n.H8E[t]}},533576:(e,t,a)=>{a.d(t,{g:()=>h});var r=a(338436),n=a(705992),s=a(485650),i=a(828426),o=a(639424),l=a(17563),d=a(840470),c=a(82281);let{publicRuntimeConfig:{_app:{name:u,version:m}}}=a.n(c)()();class h{constructor(e,t="peacock"){this.downloadPromises=[],this.config=e,this.delayedDependencies=a.e(3367).then(a.bind(a,403367)),this.configStreamSaver(),this.APP_NAME=t,this.startingPromises=this.createWaitingPromises(e),this.downloadProcess=Promise.all(this.startingPromises).then(()=>Promise.all(this.downloadPromises)).then(t=>{let a=[].concat(...t);this.createAndDownloadZip(a,e.finalZipName)})}async restartDownload(e,t,a,r){return this.downloadPromises=[],this.resolveUrl(e,t,a,r),Promise.all(this.downloadPromises).then(e=>{let t=[].concat(...e);return this.createAndDownloadZip(t,this.config.finalZipName)})}async configStreamSaver(){let{streamSaver:e}=await this.delayedDependencies,t=(window.location.hostname||"localhost").includes("localhost"),a="";t&&(a="https://www.qa.shutterstock.com"),e.mitm=`${a}/static/mitm/mitm.html`}requestUnwatermarkedGeneratedAsset(e){let t=`query download {
      generatedAssetOriginalSource(assetId: "${e}") {
        data {
          src
        }
      }
    }`;return(0,d.request)({url:"/api/graphql",document:t,variables:{},requestHeaders:{[n.E3]:u,[n.Jw]:m,[n.ef]:this.APP_NAME||"peacock"}}).then(e=>e.generatedAssetOriginalSource.data.src)}createWaitingPromises(e){let t=[new Promise((e,t)=>{this.editsResolver=e,this.editsRejecter=t})];if(e.embedImage){let e=new Promise((e,t)=>{this.embedResolver=e,this.embedRejecter=t});t.push(e)}return t}async generateEpsUrl(e){let t,a=s.NOy;(t=e?.[0].asset?(0,i.I)({assetsInfo:e}):{required_cookies:"",content:[{content_id:e[0].contentId,content_type:e[0].contentType,content_size:e[0].contentSize,content_format:e[0].contentFormat,license_name:e[0].licenseName,show_modal:!0}]}).content[0].content_size=l.XJ.Vector.toLocaleLowerCase(),t.content[0].content_format=l.vz.Eps.toLocaleLowerCase();let{downloadUrl:r}=await (0,o.Dt)({downloadPayload:t,licenseeIdentifier:a});return r}async resolveUrl(e,t,a,n){let s=e.sizes?e.sizes:{},i=r.hq in s?await this.generateEpsUrl(n):void 0;e.id===this.config.editsImage&&(this.downloadPromises.push(this.createEditsResponses(t,e.id,a)),i&&this.downloadPromises.push(this.createEmbedResponses(i)),this.editsResolver(t)),e.id===this.config.embedImage&&this.embedResolver&&(this.config.editsImage.includes("asset-generation")&&this.requestUnwatermarkedGeneratedAsset(this.config.editsImage).then(e=>{this.downloadPromises.push(this.createEditsResponses(e,this.config.editsImage,a)),this.editsResolver(e)}),this.downloadPromises.push(this.createEmbedResponses(t)),i&&this.downloadPromises.push(this.createEmbedResponses(i)),this.embedResolver(t))}resolveWatermarkedUrl(e,t,a){if(e===this.config.editsImage&&(this.downloadPromises.push(this.createEditsResponses(t,e,a)),this.editsResolver(t)),e===this.config.embedImage&&this.embedResolver){if(this.config.editsImage.includes("asset-generation")){let e=this.config.imageEdits?.src;e&&(this.downloadPromises.push(this.createEditsResponses(e,this.config.editsImage,a)),this.editsResolver(e))}this.downloadPromises.push(this.createEmbedResponses(t)),this.embedResolver(t)}}async createEmbedResponses(e){return[await fetch(e)]}async createEditsResponses(e){return[await fetch(e)]}async createAndDownloadZip(e,t){let{streamSaver:a,downloadZip:r}=await this.delayedDependencies,n=a.createWriteStream(t),s=r(e);s.body?.pipeTo(n)}}},590891:(e,t,a)=>{a.r(t),a.d(t,{DownloadButton:()=>b});var r=a(406029),n=a(315888),s=a(813631),i=a(630552),o=a(882431),l=a(559044),d=a(262593),c=a(476539),u=a(193114),m=a(377981),h=a(323982),p=a(609380),g=a(235757),w=a(981278),f=a(455729),v=a(307859);let b=e=>{let{asset:t,clickAnalyticsLabel:a,color:b,isOverlay:y,label:_,onClickHandlerOverride:A=null,productToSellInOverlay:I=n.hl,shouldUseDownloadIcon:x=!1,variant:k}=e,{asPath:R}=(0,w.useRouter)(),C=(0,m.h)(),E=(0,u.i)({asset:t}),S=(0,l.$9)(t),[,P]=(0,h.p)(t)||[],B={landing_page:S?`${R}?showDrawerOnLoad=true`:(0,d.$)({orderFlow:o.Y.LO_ASSET_OVERLAY,asset:t,productId:E?n.uyi:I,existingUserRedirect:P}),...t?.type===s.no&&{assetType:t?.type,imageId:t?.id}},T=(0,c.z)({query:B}),j=(0,f.useCallback)(()=>{C({actionName:i.mq.IMAGE_ADP_DOWNLOAD_CTA_CLICKED,customAttributes:{component:"DownloadButton"}}),T()},[C,T]),z=t&&(0,g.GT)(t)&&t?.videoRenderUrl;return(0,r.jsx)(v.H,{label:_,color:b,variant:k,onClick:A??(z?()=>{t&&(0,g.GT)(t)&&(0,p.I)(t)}:j),clickAnalyticsLabel:a,shouldUseIcon:x,isOverlay:y})}},609380:(e,t,a)=>{a.d(t,{I:()=>s});var r=a(639424);let n={"video/mp4":".mp4","image/gif":".gif"},s=async e=>{let t=await fetch(`${e.videoRenderUrl}?doc_id=${e.id}`,{mode:"cors",credentials:"include"}).then(e=>e.blob()),a=n[t.type]||"";(0,r.Bx)(URL.createObjectURL(t),{name:`${e.title}${a}`})}},614304:(e,t,a)=>{a.d(t,{S:()=>o});var r=a(926114),n=a(648973),s=a(515729),i=a(568880);let o=()=>{let{enqueueSnackbar:e}=(0,s.d)(),{t}=(0,i.Bd)(r.mRw);return{enqueueGenericError:a=>{e({alertSeverity:n.ff,error:a,message:t("notifications:label_generic_failure"),reason:"generic error"})}}}},629749:(e,t,a)=>{a.d(t,{v:()=>s});var r=a(455729),n=a(157535);let s=()=>(0,r.useContext)(n.j)},639424:(e,t,a)=>{a.d(t,{fX:()=>v,eG:()=>b,T9:()=>k,Bx:()=>f,Zj:()=>I,Dt:()=>_,G$:()=>y,lL:()=>x});var r=a(940252);let n=e=>{let{urlParams:t={},queryParams:a={}}=e,n=`/bundle/${t.filename}`,s={...a};return{url:n,defaultParams:s,formattedUrl:(0,r.format)({pathname:n,query:s})}};var s=a(487519),i=a(532598),o=a(338436),l=a(813631),d=a(669670),c=a(485650),u=a(116835),m=a(722442),h=a(559044),p=a(957160),g=a(531950),w=a(296751);let f=function(e){let{name:t,target:a="_self"}=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=document.createElement("a");r.setAttribute("data-automation","FeatureDownload_utils_link"),r.style.display="none",r.href=e,r.target=a,r.download=t||e,document.body.appendChild(r),r.click(),(0,w.rd)()||document.body.removeChild(r)},v=async e=>{let{downloadBundlePayload:t}=e,a=n({urlParams:{filename:t.bundleFilename}}).formattedUrl,{public_url:r}=(await g.a8.post(a,t.content)).data;return r},b=async e=>{let{downloadZip:t}=await a.e(17555).then(a.bind(a,717555)),r=await Promise.all(e.map(async e=>{let{filename:t,url:a}=e,r=await fetch(a);return{name:t,input:await r.blob()}})),n=await t(r).blob();return URL.createObjectURL(n)},y=e=>{let{licensedContent:t,supplementalUrlType:a}=e,{downloadUrl:r,supplementalUrls:n}=t[0];if(n?.length&&a){let{url:e=r}=n.find(e=>{let{type:t}=e;return t===a})||{};return e}return r},_=async e=>{let{downloadPayload:t,supplementalUrlType:a,licenseeIdentifier:r}=e,n=(0,s.Gt)({urlParams:{licenseeIdentifier:r}}).formattedUrl,{data:{meta:{licensedContent:i}}}=await g.Bn.post(n,t);return{downloadUrl:y({licensedContent:i,supplementalUrlType:a}),licensedContent:i}},A=e=>{let{existingAssetLicenses:t,contentType:a,licenseName:r,subscriptions:n}=e;switch(a){case l.G_:{let e=(0,p.d)({existingAssetLicenses:t,subscriptions:[...n?.videoSubscriptions??[],...n?.videoCompSubscriptions??[]],licenseName:r});return e?.redeemableFor||r}case l.FY:return r||c.nYH;case l.M9:return r||c.X0R;case l.vo:default:return r}},I=async e=>{let{assets:t,existingAssetLicenses:a,format:r,selectedAssetSize:n,subscriptions:s}=e,c=t.map(async e=>{let t=(0,m.R9)({asset:e}),c=await (0,u.og)({asset:e,licenseName:e.licenseId,selectedAssetSize:n});return{...c,...t===l.M9&&{override_filename:`${d.wT}_${e.id}.${r||c.content_format}`},...(0,h.R1)(e)&&{content_provider:"pixelsquid-media",content_size:o.kP,...e.selectedFormatType===i.OA&&{include_shadows:"on"===e.selectedShadowsOption}},license_name:s?A({existingAssetLicenses:a,contentType:t,licenseName:e.licenseId,subscriptions:s}):e.licenseId,show_modal:!0}});return{required_cookies:"",content:await Promise.all(c)}},x=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};e&&e.id&&(e.title||e.description)&&e.type&&window.localStorage.setItem("sstk_ent_asset_preview",JSON.stringify({id:e.id,title:e.title||e.description,thumb:e.src||e.previewImageUrl||"",video:e.previewVideoUrls,url:e.link,type:(0,h.f0)(e),isRex:e.isRexEditorial}))},k=e=>{let t;return requestAnimationFrame?function(){for(var a=arguments.length,r=Array(a),n=0;n<a;n++)r[n]=arguments[n];t&&cancelAnimationFrame(t),t=requestAnimationFrame(()=>{e(...r)})}:e}},700661:(e,t,a)=>{a.d(t,{M:()=>i});var r=a(406029),n=a(455729),s=a(263607);let i=e=>{let{allSizesAssetEligibility:t,asset:a,extraConfirmationDrawerContent:i,drawerStatusMessageProps:o,children:l}=e;return(0,r.jsx)(s.A.Provider,{value:(0,n.useMemo)(()=>({allSizesAssetEligibility:t,asset:a,extraConfirmationDrawerContent:i,drawerStatusMessageProps:o}),[t,a,i,o]),children:l})}},808059:(e,t,a)=>{a.d(t,{kN:()=>d,h6:()=>m,Cw:()=>u});var r=a(406029),n=a(467889);let s=e=>(0,n.y)()(t=>({...e,actions:{setStates:e=>t(t=>({...t,...e})),setState:(e,a)=>t(t=>({...t,[e]:a}))}}));var i=a(455729),o=a(565317);let l=(0,i.createContext)(null),d=e=>{let{children:t,initialState:a}=e,[n]=(0,i.useState)(()=>s(a));return(0,r.jsx)(l.Provider,{value:n,children:t})},c=e=>{let t=(0,i.useContext)(l);if(!t)throw Error("useConversionPanelStore must be used within CounterStoreProvider");return(0,o.P)(t,e)},u=e=>c(t=>t[e]),m=()=>c(e=>e.actions)},828426:(e,t,a)=>{a.d(t,{I:()=>p,p:()=>g});var r=a(926114),n=a(648973),s=a(485650),i=a(360662),o=a(497604),l=a(559044),d=a(82078),c=a(639424),u=a(461266),m=a(568880),h=a(455729);let p=e=>{let{assetsInfo:t=[]}=e;return{required_cookies:"",content:t.map(e=>{let{asset:t,licenseName:a,selectedAssetSize:r,selectedShadowsOption:n}=e;return{...(0,o.e)({asset:t,selectedAssetSize:r,selectedShadowsOption:n}),license_name:a,show_modal:!0}})}},g=e=>{let{setRedownloadStatus:t=u.lQ,onRedownloadSuccess:a=u.lQ}=e,[o,g]=(0,h.useState)(!1),w=(0,d.$)(),f=(0,i.Q)(),{t:v}=(0,m.Bd)(r.EJ3),b=v("file_name_edited");return{redownloadHandler:(0,h.useCallback)(async e=>{let{assetsInfo:r,isPostDownload:i=!1}=e,{asset:o}=r?.[0]??{};g(!0),t?.({status:"",error:void 0});let d=p({assetsInfo:r}),u=(0,l.OJ)(o),m=(0,l.MO)(o),h=s.NOy;try{let{downloadUrl:e,licensedContent:t}=await (0,c.Dt)({downloadPayload:d,licenseeIdentifier:h});if(a?.({content:t,assetsInfo:r}),!u&&!m)if(w({assets:[o],isComp:!1,isPaid:!1,isQuickDownload:!0,isRedownload:!0}),f?.current&&0!==Object.keys(f.current).length){let{downloader:t}=f.current;i?t?.restartDownload(o,e,b,r):t?.resolveUrl(o,e,b,r)}else(0,c.Bx)(e,{target:"_blank"})}catch(e){t?.({status:n.Nz,error:e})}finally{g(!1)}},[b,f,a,w,t]),isRedownloadInProgress:o}}},838178:(e,t,a)=>{a.d(t,{X:()=>n});var r=a(571024);let n=a.n(r)()(()=>a.e(83768).then(a.bind(a,719320)).then(e=>({default:e.ThemedLicenseDrawer})),{loadableGenerated:{webpack:()=>[719320]},ssr:!1})},901606:(e,t,a)=>{a.d(t,{F:()=>i});var r=a(563609);a(840470);var n=a(82281);let{publicRuntimeConfig:{apiEndpoints:s}}=a.n(n)()(),i=e=>{let{response:t,onError:a,onSuccess:n}=e,{errors:s}=t;return s&&s?.length>0?a(s[0].extensions?.code===r.OQ.UNAUTHORIZED?Error(r.OQ.UNAUTHORIZED):Error(s[0].extensions?.code??"Error from graphql response")):n(t.data)}},949544:(e,t,a)=>{a.d(t,{M:()=>d});var r=a(487519),n=a(30721),s=a(531950),i=a(293251),o=a(12482),l=a(455729);let d=function(){let{defaultTosStatus:e}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{defaultTosStatus:!0},t=(0,r.Q$)().formattedUrl,a=(0,n.i9)(),d=(0,i.jE)(),{data:c=e,error:u,isLoading:m}=(0,o.I)({queryKey:[t],queryFn:()=>s.Bn.get(t).then(e=>{let{data:{agreedTime:t}={}}=e;return!!t}),enabled:a});return{onAcceptTos:(0,l.useCallback)(async()=>{try{await s.Bn.post(t),await d.invalidateQueries({queryKey:[t]})}catch(e){}},[d,t]),tosStatus:!!u||c,isLoading:m}}},970190:(e,t,a)=>{a.r(t),a.d(t,{DownloadButton:()=>k});var r=a(406029),n=a(926114),s=a(838178),i=a(337304),o=a(181758),l=a(298714),d=a(727326),c=a(563609),u=a(360662),m=a(700661),h=a(533576),p=a(498917),g=a(530376),w=a(614304),f=a(213304),v=a(778042),b=a(949544),y=a(116659),_=a(461266),A=a(52492),I=a(568880),x=a(455729);let k=e=>{let{asset:t,onRegistration:a=_.lQ,onRegistrationComplete:k=_.lQ,withTooltip:R=!1,isIconButton:C=!1,squareButton:E=!1,tooltipPlacement:S="top",isDisabled:P=!1,labelTrack:B=d.YVZ,canRegister:T=!0,originalAsset:j,...z}=e,U=(0,v.a)(),D=(0,g.I2)(),{ready:O,t:L}=(0,I.Bd)(n.MJ$),$=L("common:actions_download"),N=(0,u.Q)(),[G,M]=(0,x.useState)(null),[W,F]=(0,x.useState)(!1),{enqueueGenericError:q}=(0,w.S)(),[H,Q]=(0,x.useState)(!1),{tosStatus:Z}=(0,b.M)(),K=(0,x.useCallback)(()=>{F(!1)},[F]),Y=(0,x.useCallback)(()=>{D({action:g.rc.DOWNLOAD,asset:t}),a()},[D,a,t]),V=(0,x.useCallback)(e=>{F(Z),Q(!Z),M(e),(0,y.W)(e)||k?.(e)},[M,F,k,Z]),J=(0,x.useCallback)(async()=>{if(!t||!j||(0,p.hx)(j)){let e="Generated image";(0,p.hx)(j)||(e=j?.isUpload?"User image":"Creative image"),q(Error("AIGEN-3335 - DownloadButton: asset or originalAsset is not valid",{cause:{code:`AIGEN-3335: assetId: ${t?.id}; originalAssetId: ${j?.id}; imageType: ${e}`}}));return}let e=new h.g({editsImage:t?.id,finalZipName:`shutterstock_${t?.id}.zip`,embedImage:j?.id},c.C3);j?.isUpload?e.resolveUrl({id:j?.id},"originalCatalogUrl","",[]):(M(j),F(Z),Q(!Z),N.current={downloader:e,isPeacock:!0})},[t,q,N,Z,j]),X=(0,f.G)(W),ee={isIconButton:C,color:"secondary",labelTrack:B,label:$,...(C||E||U)&&{Icon:A.Download},"data-automation":C?"syntheticAssetAction_DownloadIconButton":"syntheticAssetAction_DownloadButton",tooltipPlacement:S,squareButton:E,withLabel:E,withTooltip:R&&!U,...z};return(0,r.jsxs)(r.Fragment,{children:[T?(0,r.jsx)(o.x,{asset:t,assetRegisteredCallback:V,onRegistration:Y,component:i.t,componentProps:ee,isDisabled:P,children:O&&$}):(0,r.jsx)(i.t,{...ee,onClick:J,children:O&&$}),X?(0,r.jsx)(m.M,{asset:G,children:(0,r.jsx)(s.X,{isDrawerOpen:W,onDrawerClose:K,themeModeOverride:void 0})}):null,(0,r.jsx)(l.l,{showTosModal:H,setShowTosModal:Q,setIsDrawerOpen:F})]})}}}]);
//# sourceMappingURL=DownloadButton.4d579f3423efa21a.js.map